<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo</title>
    <link rel="stylesheet" href="/static/d3-tip.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-light  navbar-expand-lg" style="background-color: #523F78; height: 63px;">
        <div class="container">
            <a href="/" class="navbar-brand text-white mr-auto">Data Mashup Application</a>
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white-50" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span>Search</span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="search_1">Search specific area</a>
                        <a class="dropdown-item" href="search_2">Search specific year</a>
{#                        <div class="dropdown-divider"></div>#}
{#                            <a class="dropdown-item" href="#">Something else here</a>#}
                    </div>
                </li>
                <li class="nav-item"><a class="nav-link  text-white-50 mr-lg-3"><span class="mosh">Full List</span></a></li>
{#                <li class="nav-item"><a class="nav-link  text-white-50 mr-lg-3"><span class="mosh" id="about">About</span></a></li>#}
{#                <li class="nav-item"><a class="nav-link  text-white-50 mr-lg-3"><span class="mosh" id="more">More</span></a></li>#}
                <li class="nav-item"><a class="nav-link  text-white-50 mr-lg-3"><span class="mosh" id="population">Population</span></a></li>
            </ul>
        </div>
    </nav>
{#    <div id="search-area">#}
{#        <div class="container" style="height: 100%;">#}
{#        <form action="#">#}
{#            <div class="input-group input-group-sm mb-3 col-5 pt-3">#}
{#                <div class="input-group-prepend">#}
{#                    <span class="input-group-text" id="form-state">State</span>#}
{#                </div>#}
{#                <select  id= 'form-state-input' type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm">#}
{#                    <option>AAAAAAAAAAAAAAA</option>#}
{#                    <option>AAAAAAAAdsA</option>#}
{#                    <option>AAA</option>#}
{#                    <option>AAAAAAAAAAAAAAAAAAAAAA</option>#}
{#                </select>#}
{#            </div>#}
{#            <div class="input-group input-group-sm mb-3 col-5">#}
{#                <div class="input-group-prepend">#}
{#                    <span class="input-group-text" id="form-date-from">From</span>#}
{#                </div>#}
{#                <input type="date" class="form-control" id="form-date-from-input" aria-label="Small" aria-describedby="inputGroup-sizing-sm" min="2000-1-1" max="2015-1-1">#}
{#            </div>#}
{#            <div class="input-group input-group-sm mb-3 col-5">#}
{#                <div class="input-group-prepend">#}
{#                    <span class="input-group-text" id="form-date-to" style="width: 50px">To</span>#}
{#                </div>#}
{#                <input type="date" class="form-control" id="form-date-to-input" aria-label="Small" aria-describedby="inputGroup-sizing-sm" min="2000-1-1" max="2015-1-1">#}
{#            </div>#}
{#            <div class="row col-5">#}
{#                <div style="margin-left: 350px">#}
{#                    <button type="button" class="btn btn-primary" id="submit-button">Submit</button>#}
{#                </div>#}
{#            </div>#}
{#        </form>#}
{#        </div>#}
{#    </div>#}
    <div id="carouselControls" class="carousel slide" data-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img class="d-block w-100" src="/static/gun-violence_2.jpg" alt="First slide" height="600">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="/static/gun-violence_1.jpg" alt="Second slide" height="600">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="/static/gun-violence_3.jpg" alt="Third slide" height="600">
        </div>
      </div>
      <a class="carousel-control-prev" href="#carouselControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    <div id="main">
        <div class="container">
            <!-- Main content here................................... -->
            <script type='text/javascript' src='http://dataviz.worldbank.org/javascripts/api/viz_v1.js'></script>
            <div class='tableauPlaceholder col-md-12'>
                <object class='tableauViz' width='1080' height='1067' style='display:none;'>
                    <param name='host_url' value='http%3A%2F%2Fdataviz.worldbank.org%2F' />
                    <param name='embed_code_version' value='3' />
                    <param name='site_root' value='&#47;t&#47;HealthStats' />
                    <param name='name' value='HealthStatsPopulationDashboardbyCountryandGroup-v3_Jun2017&#47;HStatsDashboardbyCountryandGroup' />
                    <param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='display_count' value='no' />
                </object>
            </div>
        </div>
    </div>
    <div id="bottom" class="navbar navbar-expand-lg navbar-light" style="background-color: #523F78; height: 200px;">
        <div class="container">
            <!-- bottom content here................................... -->
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                 <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">404 NOFOUND</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                 </div>
                    <div class="modal-body">
                         ...
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Fine</button>
                    </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
        <script>
            $('#main .container').html('');
            $('.mosh').click(function() {
                $('#main .container').html('');
                $('.mosh').css('text-decoration', 'none');
                $(this).css('text-decoration', 'underline');
                if ($(this).attr('id') === 'population') {
                    var h = $.ajax({
                    url: '/' + $(this).attr('id'),
                    type: 'get'
                    }).done(function(data) {
                        $('#carouselControls').remove();
                        $('#search-area').remove();
                        $('#main .container').append(data);
                    }).fail(function(xhr, status) {
                        $('#exampleModal').modal('show');
                    })
                }
                if ($(this).attr('id') === 'about') {
                    var h = $.ajax({
                    url: '/' + $(this).attr('id'),
                    type: 'get'
                    }).done(function(data) {
                        pieChart(data);
                    }).fail(function(xhr, status) {
                        $('#exampleModal').modal('show');
                    })
                }
            });

        $('#submit-button').click(function() {
            var search_state = $('#form-state-input').val();
            var search_year_from = $('#form-date-from-input').val();
            var search_year_to = $('#form-date-to-input').val();
            alert('search query: ' + search_state + ', from' + search_year_from + ' to ' + search_year_to);
        })

    </script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="static/barChart.js" type="text/javascript"></script>
    <script src="/static/pieChart.js" type="text/javascript"></script>
    <script type="text/javascript" src="/static/d3-tip.js" charset="utf-8"></script>
</body>
</html>