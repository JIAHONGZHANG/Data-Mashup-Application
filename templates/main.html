<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo</title>
    <link rel="stylesheet" href="/static/d3-tip.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-light  navbar-expand-lg" style="background-color: #523F78; height: 63px;">
        <div class="container">
            <a href="/" class="navbar-brand text-white mr-auto">Stop Gun Violence</a>
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white-50" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span>Search</span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="search_1">Search a specific area</a>
                        <a class="dropdown-item" href="search_2">Search a specific year</a>
{#                        <div class="dropdown-divider"></div>#}
{#                            <a class="dropdown-item" href="#">Something else here</a>#}
                    </div>
                </li>
{#                <li class="nav-item"><a class="nav-link  text-white-50 mr-lg-3"><span class="mosh">Full List</span></a></li>#}
{#                <li class="nav-item"><a class="nav-link  text-white-50 mr-lg-3"><span class="mosh" id="about">About</span></a></li>#}
{#                <li class="nav-item"><a class="nav-link  text-white-50 mr-lg-3"><span class="mosh" id="more">More</span></a></li>#}
                <li class="nav-item"><a class="nav-link  text-white-50 mr-lg-3"><span class="mosh" id="population">Population</span></a></li>
            </ul>
        </div>
    </nav>
    <div id="carouselControls" class="carousel slide" data-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img class="d-block w-100" src="/static/gun-violence_2.jpg" alt="First slide" style="height: 765px;">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="/static/gun-violence_1.jpg" alt="Second slide" style="height: 765px;">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="/static/gun-violence_3.jpg" alt="Third slide" style="height: 765px;">
        </div>
      </div>
      <a class="carousel-control-prev" href="#carouselControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    <div id="main">
        <div class="container">
            <!-- Main content here................................... -->
            <script type='text/javascript' src='http://dataviz.worldbank.org/javascripts/api/viz_v1.js'></script>
            <div class='tableauPlaceholder col-md-12'>
                <object class='tableauViz' width='1080' height='1067' style='display:none;'>
                    <param name='host_url' value='http%3A%2F%2Fdataviz.worldbank.org%2F' />
                    <param name='embed_code_version' value='3' />
                    <param name='site_root' value='&#47;t&#47;HealthStats' />
                    <param name='name' value='HealthStatsPopulationDashboardbyCountryandGroup-v3_Jun2017&#47;HStatsDashboardbyCountryandGroup' />
                    <param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='display_count' value='no' />
                </object>
            </div>
        </div>
        <div class="content" style="padding-top: 40px">
                <div class="row">
                    <div class="col-9">
                        <header style="margin-bottom: 50px">
                            <h1 style="text-align: center;font-family: Helmet, Freesans, Helvetica, Arial, sans-serif;">The Statistics and Analysis of Gun Violence in US</h1>
                            <h1 style="text-align: center;font-family: Helmet, Freesans, Helvetica, Arial, sans-serif;">from 2013 to 2017</h1>
                        </header>
                        <div class="main-content" style="border-right: 1px solid #DBDBDB;padding-left: 10px;padding-right: 10px;box-sizing: border-box">
                            <div class="description">
                                 This page aims to show an intuitive facts of gun shooting in US through providing some grsphs.
                            </div>
                            <div class="description-img"><img src="/static/img-1.png" alt="img-1" height="420" width="600" class="sole-img"></div>
                            <div class="description">
                                Compared with 2013, the amount of incidents increased rapidly from 2014. Before reaching a peak in July or August(2016), the amount of victims goes through the lowest point  in February and  then flutuates slightly between 2013 and 2017.
                            </div>
                                <div id="carouselControls2" class="carousel slide" data-ride="carousel">
                              <div class="carousel-inner">
                                <div class="carousel-item active">
                                  <img class="d-block" src="/static/img-2.png" alt="img-2" style="width: 600px;height: 420px;position: relative;left: 220px">
                                </div>
                                <div class="carousel-item">
                                  <img class="d-block" src="/static/img-3.png" alt="img-3" style="width: 720px;height: 420px;position: relative;left: 100px">
                                </div>
                                <div class="carousel-item">
                                  <img class="d-block" src="/static/img-5.png" alt="img-5" style="width: 600px;height: 420px;position: relative;left: 220px">
                                </div>
                              </div>
                              <a class="carousel-control-prev w-50" href="#carouselControls2" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                              </a>
                              <a class="carousel-control-next w-50" href="#carouselControls2" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                              </a>
                            </div>
                            <div class="description">
                                        According to the graph of victims, the amount of victims has increased sharply from 2013 to 2014 and reached at the top in 2016.
    The injured people accounts for the largest proportion(66.3%) among the  victims. In terms of age, most of injured are adults, accounting for 91%, and teens injured takes second place, accounting for 7%.
                            </div>
                            <div id="carouselControls3" class="carousel slide" data-ride="carousel">
                              <div class="carousel-inner">
                                <div class="carousel-item active">
                                  <img class="d-block" src="/static/img-4.png" alt="img-4" style="width: 600px;height: 420px;position: relative;left: 250px">
                                </div>
                                <div class="carousel-item">
                                  <img class="d-block" src="/static/img-6.png" alt="img-6" style="width: 800px;height: 420px;position: relative;left: 170px">
                                </div>
                              </div>
                              <a class="carousel-control-prev w-50" href="#carouselControls3" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                              </a>
                              <a class="carousel-control-next w-50" href="#carouselControls3" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                              </a>
                            </div>
                            <div class="description">
                                   According to the graph of  perpetrators, over 90% of perpetrators  is male while female only accounts for less than 10%. In terms of age, most of perpetrators are adult ,accounting for 91.86%, teen perpetrators takes second place for 7.76% , 0.372% of perpetrators are children , with age range from 0 to 11.
                            </div>
                        </div>
                        <div id="random">

                        </div>
                    </div>
                    <div class="col-3" style="padding-top: 50px">
                        <h1 style="font-size: 20px;padding-left: 75px">The Top5</h1>
                        <h1 style="font-size: 20px">States With The Most Mass Shooting</h1>
                        <div class="second-content">
                            <ul class="list-group list-group-flush" style="position: relative;left: -30px">
                                <li class="list-group-item" style="padding-left: 32px">California<span style="float: right">32</span></li>
                                <li class="list-group-item" style="padding-left: 32px">Florida<span style="float: right">25</span></li>
                                <li class="list-group-item" style="padding-left: 32px">Texas<span style="float: right">20</span></li>
                                <li class="list-group-item" style="padding-left: 32px">Washington<span style="float: right">17</span></li>
                                <li class="list-group-item" style="padding-left: 32px">Georgia<span style="float: right">15</span></li>
                            </ul>
                        </div>
                            <div style="padding-top: 80px">
                                <h1 style="font-size: 20px;padding-left: 75px">The Top5</h1>
                                <h1 style="font-size: 20px">States With The Most Gun Violence</h1>
                                <div class="second-content">
                                    <ul class="list-group list-group-flush" style="position: relative;left: -30px">
                                        <li class="list-group-item" style="padding-left: 32px">Illinois<span style="float: right">16923</span></li>
                                        <li class="list-group-item" style="padding-left: 32px">California<span style="float: right">13206</span></li>
                                        <li class="list-group-item" style="padding-left: 32px">Texas<span style="float: right">11152</span></li>
                                        <li class="list-group-item" style="padding-left: 32px">Florida<span style="float: right">10981</span></li>
                                        <li class="list-group-item" style="padding-left: 32px">Ohio<span style="float: right">8211</span></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
{#    <div id="bottom" class="navbar navbar-expand-lg navbar-light" style="background-color: #523F78; height: 200px;">#}
{#        <div class="container">#}
{#            <!-- bottom content here................................... -->#}
{#        </div>#}
{#    </div>#}
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                 <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">404 NOFOUND</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                 </div>
                    <div class="modal-body">
                         ...
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Fine</button>
                    </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
        <script>
            function randomFrom(lowerValue,upperValue) {
                return Math.floor(Math.random() * (upperValue - lowerValue + 1) + lowerValue);
            }
            $('#main .container').html('');
            var year = randomFrom(13,17);
            var news = $.ajax({
                url: '/news?year=20' + year,
                type: 'get'
            }).done(function(data){
                console.log(data);
                $('#random').append('<h2 style=\"padding: 20px 0 0 26px;font-size: 15px;\">Know More: </h2>');
                for (var i in data) {
                    console.log(i);
                    var a_tag = '<a href="' + data[i].url +'" target="_blank">' + data[i].title + '</a>';
                    var msg = '<div style="padding: 5px 0 0 26px;font-size: 13px;">' + a_tag + '</div>';
                    $('#random').append(msg);
                }
            });
            $('.mosh').click(function() {
                $('#main .container').html('');
                $('.mosh').css('text-decoration', 'none');
                $(this).css('text-decoration', 'underline');
                if ($(this).attr('id') === 'population') {
                    $('#main .content').hide();
                    var h = $.ajax({
                    url: '/' + $(this).attr('id'),
                    type: 'get'
                    }).done(function(data) {
                        $('#carouselControls').remove();
                        $('#search-area').remove();
                        $('#main .container').append(data);
                    }).fail(function(xhr, status) {
                        $('#exampleModal').modal('show');
                    })
                }
                if ($(this).attr('id') === 'about') {
                    var h = $.ajax({
                    url: '/' + $(this).attr('id'),
                    type: 'get'
                    }).done(function(data) {
                        pieChart(data);
                    }).fail(function(xhr, status) {
                        $('#exampleModal').modal('show');
                    })
                }
            });

        $('#submit-button').click(function() {
            var search_state = $('#form-state-input').val();
            var search_year_from = $('#form-date-from-input').val();
            var search_year_to = $('#form-date-to-input').val();
            alert('search query: ' + search_state + ', from' + search_year_from + ' to ' + search_year_to);
        })

    </script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="static/barChart.js" type="text/javascript"></script>
    <script src="/static/pieChart.js" type="text/javascript"></script>
    <script type="text/javascript" src="/static/d3-tip.js" charset="utf-8"></script>
</body>
</html>